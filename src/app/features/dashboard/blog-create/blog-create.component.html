<div class="w-full p-4 md:p-8 bg-white min-h-screen">
  <form [formGroup]="blogForm" (ngSubmit)="createBlog()" class="space-y-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Editor Section -->
      <div class="lg:col-span-2 space-y-6">
        <!-- Title -->
        <div>
          <label for="title" class="block text-sm font-semibold text-gray-700">
            Title
          </label>
          <input
            id="title"
            type="text"
            formControlName="title"
            placeholder="Enter your blog title"
            class="mt-1 block w-full border border-gray-300 rounded-lg p-3 text-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition"
          />
        </div>

        <!-- Rich Text Editor -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Content Editor
          </label>
          <div
            class="border border-gray-300 rounded-lg overflow-hidden bg-white shadow-sm"
          >
            <quill-editor
              *ngIf="isBrowser"
              formControlName="blog_content"
              [modules]="quillModules"
              theme="snow"
              class="min-h-[350px] text-base"
            ></quill-editor>
          </div>
        </div>
      </div>

      <!-- SEO Settings -->
      <div
        class="lg:col-span-1 space-y-6 bg-gray-50 p-6 rounded-lg shadow-lg h-fit sticky top-4"
      >
        <h2 class="text-xl font-bold text-gray-800 border-b pb-2 mb-4">
          ⚙️ SEO & Settings
        </h2>

        <app-char-count-input
          [parentForm]="blogForm"
          controlName="meta_description"
          label="Meta Description"
          [maxLength]="160"
          placeholder="Max 160 characters"
        ></app-char-count-input>

        <textarea
          formControlName="description"
          placeholder="Short blog description"
          class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500 transition"
        ></textarea>

        <app-char-count-input
          [parentForm]="blogForm"
          controlName="slug"
          label="Slug (URL Path)"
          [maxLength]="100"
          placeholder="e.g., my-awesome-blog-post"
          helpText="Used as the post URL fragment."
        ></app-char-count-input>

        <div>
          <label
            for="category"
            class="block text-sm font-semibold text-gray-700"
            >Categories</label
          >
          <mat-select formControlName="category" multiple>
            <mat-option *ngFor="let cat of categories" [value]="cat._id">
              {{ cat.name }}
            </mat-option>
          </mat-select>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700">Tags</label>
          <input
            type="text"
            formControlName="tags"
            placeholder="Separate tags with commas (e.g., angular, seo, tailwind)"
            class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500 transition"
          />
        </div>
      </div>
    </div>

    <div class="pt-8 flex justify-end">
      <button
        type="submit"
        class="bg-blue-600 text-white px-8 py-3 rounded-lg font-bold text-lg shadow-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
        [disabled]="blogForm.invalid"
      >
        Publish Blog Post
      </button>
    </div>
  </form>
</div>

<p-toast position="bottom-right"></p-toast>
